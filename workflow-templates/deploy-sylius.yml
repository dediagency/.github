name: Deploy Sylius [ENVIRONMENT]

on:
  push:
    branches:
      - [BRANCH]

concurrency: sylius-[ENVIRONMENT]

jobs:
  deploy-[ENVIRONMENT]:
    runs-on: ubuntu-latest
    environment:
      name: [ENVIRONMENT]
      url: https://[ENVIRONMENT]-[USERNAME].dediagency.dev

    steps:
      - name: Deploy Sylius
        uses: dediagency/.github/actions/deploy/sylius@v1
        with:
          environment: [ENVIRONMENT]
          branch: [BRANCH]
          ssh_host: [HOST]
          ssh_username: [USERNAME]
          ssh_private_key: ${{ secrets.SSH_PRIVATE_KEY }}
          site_url: https://[ENVIRONMENT]-[USERNAME].dediagency.dev
